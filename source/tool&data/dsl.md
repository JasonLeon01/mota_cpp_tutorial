# 事件名称DSL介绍

下面展示目前提供的事件名称：

## 墙壁类

其实并没有固定的命名格式，因为墙壁仅仅是没有 `order` 的事件而已，任何不存在于 `order()` 函数里的名称均可作为墙壁，
不过本框架中约定为 `wall` ，因为这个名称才可以被破墙镐、地震卷轴等消去。

同理的，岩浆的名字设为 `fire` ，这样才能被冰冻徽章消去。

## 怪物类

怪物类的命名方式为 `monster(x)` ， `x` 代表的是怪物编号。

## 宝石血瓶类

也就是能力值增加的事件，命名方式为： `bonus(x,y)` ，其中 `y` 为增加的数值，而 `x` 代表的内容如下所示：

| x | 0 | 1 | 2 | 3 | 4 | 5 | 6 |
| --- | --- | --- | --- | --- | --- | --- | --- |
| 代表 | 生命值 | 攻击力 | 防御力 | 魔防 | 经验 | 金币 | 等级

其中，等级遵循新新魔塔的升级加点，同时会提升 `400/5/5 * val` 的各维能力。

## 物品类

命名方式为 `item(x,y)` ，其中 `x` 为物品编号， `y` 为获取数量。

比如 *获取1把黄钥匙（0号物品）* 的事件名为 `item(0,1)` 。

## 门类

命名方式为 `door(x)` ，其中x为门的编号，从0-3分别代表暗墙、黄门、蓝门、红门。

  > “暗墙”不一定是墙，也可以是一推就倒的门，比如类机关门、新新魔塔入口处的铁门，均可用这个事件。

 ## 路障类（熔岩）

 命名方式为 `lava(x)` ，其中 `x` 为造成的伤害。

 ## 商店类

 命名方式为 `shop(w,x,y,z)` 。

其中 `w` 为商店类型， *0* 为金币商店（默认是新新魔塔类商店，可以通过 `src\main.cpp` 的 `WindowShop` 类进行更改），
*1* 为经验商店（同样也是默认为新新魔塔类商店）。

 `x` 为商店的选项（增加能力的值），不同的选项之间由 `&` 连接。
 
 如果是金币商店，默认会读取三个，分别作为生命、攻击、防御进行增加。

 如果是经验商店，默认会读取三个，分别作为等级、攻击、防御进行增加。

`y` 是初始价格，可以用变量指定，如果有多个初始价格，则是用 `&` 连接，比如经验商店三个初始价格是70、20、20，就写为 `70&20&20` ，
但是注意，如果你分了多个价格，数量一定要和你的选项数量 **完全相同** ，否则将会出错。

`z` 为涨价幅度，同样，可以用变量指定。

`y` 和 `z` 都可以不写，默认为0。

综上举例，新新魔塔的金币商店可以写为 `shop(0,500&3&3,[x],1)` ，其中 `[x]` 为指定初始价格的变量，经验商店可写为 `shop(1,1&1&2,70&20&20)` 。

24层魔塔的金币商店就更简单了，写为 `(shop,0,800&4&4/25)` 即可。

## 上下楼

这个非常简单，就是对应 `up` 和 `down` ，其中是含有上下楼动画的，这些您可以自行调整或者取消，上下楼动画为 `assets\system\mting.png` 文件。

如果你在后面添加信息，比如 `up/x/y` ，这就会将你传送至楼上的指定xy坐标，否则，将不会变更坐标。

## 传送

命名方式为 `move(m,x,y)` ，其中 `m` 为传送去的地图编号， `x,y` 为传送到的x,y坐标。

## NPC

NPC的命名方式为 `npc(x)` ，会自动寻找数据库里的npc数据完成对话，这一部分的编辑在 **对话编辑器** 里面可以了解。

## 修改变量

修改变量的命名方式为 `var(x,y)` ，会将 `x` 号变量增加 `y` ，一般用于内置的其他代码使用，而不用于地图上。

## 显示图片

显示图片的命名方式为 `picon(x,y)` ， `x` 是图片的编号， `y` 是图片的文件名，默认状态下会在 `assets\pictures\` 文件夹下寻找图片。

## 消除图片

消除图片的命名方式为 `picoff(x)` ， `x` 是图片的编号。

## 条件分歧

条件分歧的格式为 `condition(x,y,z,p,q)` 。

其中 `x` 为依托的条件，比如233号变量， `x` 就是 `[233]` ，这里和对话类型的替换完全一致。

`y` 为条件，目前可以填写为 "=="、">="、"<="、">"、"<"、"!=" ，分别对应等于、大于等于、小于等于、大于、小于、不等于。

`z` 为比较的值，比如233号变量等于10，那么 `z` 就是 `10`

`p` 为条件成立时的事件，比如233号变量等于10时，执行事件名为 `p` 的事件，如果是有事件列表，则用 `;` （ **区分于 =>** ）分隔。

`q` 为条件不成立时的事件，比如233号变量不等于10时，执行事件名为 `q` 的事件，如果是有事件列表，则用 `;` （ **区分于 =>** ）分隔。

.. hint:: 这里的p和q最末尾不需要额外添加;号，注意区分

## 转换事件名

转换事件名的命名方式为 `switch(x)` ，会将本事件的事件名转换成 `x`。

## 切换BGM

切换BGM的命名方式为 `bgmswitch(x)` ，会将当前BGM切换成 `x` ，默认状态下会在 `assets\bgm` 文件夹下寻找BGM。

## 播放动画

播放动画的命名方式为 `animate(x,y)` ，会在 `x` 号事件的坐标上播放编号为 `y` 的动画。

## 播放视频

播放视频的命名方式为 `videoplay(x)` ，会播放文件名为 `x` 的视频，默认状态下会在 `assets\video\` 文件夹下寻找视频。

## 消除事件

命名方式为 `erase` ，会消去 `motaTemp.functionEventID` 所记录的事件，一般用于对话中。

## 返回标题

返回标题的指令是 `back` ，会返回标题画面，一般用于内置的其他代码使用，而不用于地图上。

## 结局

结局的指令是 `ending` ，会进入结局画面，显示 `end.txt` 显示的结局字幕，如果没有 `end.txt` 将会直接回到标题画面。
