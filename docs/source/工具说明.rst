工具说明
=======

可视化地图编辑器MotaMapDesigner.exe
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

这里可以对游戏地图进行绘制。

事件名称介绍
-----------

可以看到，每个地图上的元素都由事件构成，而事件执行什么内容，会依托事件名，这里提供了几种基础的事件，如果有更多的需要，可以在 ``gamedata.cpp`` 的 ``GameEvent::order()`` 函数中自己定义。

每种事件的不同编号依托/号区分，下面展示目前提供的事件名称：

墙壁类
^^^^^^
其实并没有固定的命名格式，因为墙壁仅仅是没有 *order* 的事件而已，任何不存在于 ``order()`` 函数里的名称均可作为墙壁，不过本框架中约定为 ``wall`` 。

怪物类
^^^^^^
怪物类的命名方式为 ``monster/x`` ， ``x`` 代表的是怪物编号。

.. hint:: 如果您希望在战斗后对游戏内的变量（本文仅代指 ``motaVariables.variables`` ）进行更改，可以将怪物名字命名为 ``monster/x/y/z`` ，代表着在与 ``x`` 号怪物战斗之后，将会对 ``y`` 号变量增加 ``z`` （z可以为负，代表着减少）。

宝石血瓶类
^^^^^^^^^^
也就是能力值增加的事件，命名方式为： ``bonus/x/y`` ，其中 ``y`` 为增加的数值，而 ``x`` 代表的内容如下所示：

.. csv-table:: bonus事件x值对应参考
    :header: "x", "0", "1", "2", "3", "4", "5"
    :widths: 20, 30, 30, 30, 30, 30, 30

    "代表", "生命值", "攻击力", "防御力", "魔防", "经验", "金币"

门类
^^^^
命名方式为 ``door/x`` ，其中x为门的编号， ``x`` 代表的内容如下所示：

.. csv-table:: door事件x值对应参考
    :header: "x", "0", "1", "2", "3"
    :widths: 20, 30, 30, 30, 30

    "代表", "暗墙", "黄门", "蓝门", "红门"

.. hint:: “暗墙”不一定是墙，也可以是一推就倒的门，比如类机关门、新新魔塔入口处的铁门，均可用这个事件。

物品类
^^^^^^
命名方式为 ``item/x/y`` ，其中 ``x`` 为物品编号， ``y`` 为获取数量。

比如 *获取1把黄钥匙（0号物品）* 的事件名为 ``item/0/1`` 。

商店类
^^^^^^
命名方式为 ``shop/x/y`` ，其中 ``x`` 为商店类型， *0* 为金币商店（默认是新新魔塔类商店，可以通过 ``main.cpp`` 的 ``WindowShop`` 类进行更改）， *1* 为经验商店（同样也是默认为新新魔塔类商店）， ``y`` 为商店编号，用于计算价格。

其中，商店价格数组在 ``motaTemp`` 里面进行初始化，y的值对应数组的下标，本框架默认的金币商店初始价格为 ``[20,50]`` ，增加的能力值为 ``[300*y+500,3*y+3,3*y+3]`` 经验商店的分别价格是 ``[[70,20,20],[190,50,50]]`` ，增加的能力值为 ``[2*y+1,2*y+1,3*y+2]`` ，当然，这些计算方式您都可以自行调节。

上下楼
^^^^^^
这个非常简单，就是对应 ``up`` 和 ``down`` ，其中是含有上下楼动画的，这些您可以自行调整或者取消，上下楼动画为 ``graphics\system\mting.png`` 文件。

NPC
^^^^
NPC的命名方式为 ``npc/x`` ，会自动寻找数据库里的npc数据完成对话，这一部分的编辑在 **对话编辑器** 里面可以了解。

出现触发条件
-----------

这里决定的是事件出现或者可以被触发的条件，三个格子分别为类型/编号/值。

其中，类型分为：

.. csv-table:: 出现触发条件第一格对应参考
    :header: "值", "0", "1", "2"
    :widths: 20, 30, 30, 30

    "代表", "无条件", "满足条件出现", "满足条件触发"

一般的无条件事件，填写0/0/0即可，也就是默认的条件。

如果您想制作一个击败若干敌人会出现的事件，比如宝物等，例如，6号变量等于7时出现，就要设为 ``1/6/7`` 。

如果您想制作一个机关门，在8号变量等于9时可以打开，那就要设为 ``2/8/9`` 。

其余设置
--------

地图名
^^^^^^
顾名思义，就是这个地图的名称，一般的魔塔楼层命名规则为 ``x:y`` ， ``x`` 是魔塔编号，默认从0开始， ``y`` 是楼层数。

满足此规则的将会在状态栏处显示 ``魔塔y层`` （可在 ``ScreenData::mapStatus()`` 处自行更改），不满足的将会显示本身设置的地图名，比如密室等。

地图BGM
^^^^^^^
当前地图使用的BGM文件名，暂时不支持预览模式。

是否可动
^^^^^^^^
一般用于区分怪物/NPC事件和物品事件，对应RMXP的 ``停止时动画`` ，如果是怪物等，勾选上即可。

隐藏信息
^^^^^^^^
勾选可以隐藏在地图编辑器上显示的事件编号，更直观地看到在游戏中的样子。

匹配图像
^^^^^^^^
根据事件名匹配图像，会自动匹配的有 ``monster, item`` 事件，其余列表可以参考 ``DesignerReferrence.txt`` ，您可以按照格式自行更改。

如何布置事件
------------

添加
^^^^
可以将左侧的事件信息添加到地图上选中的格子，也可以在地图上点击鼠标右键快速布置。

删除
^^^^
可以将地图上选中的格子的事件进行删除，后面的事件编号将会向前挪一位。

复制
^^^^
可以将地图上选中的格子的事件信息复制到左侧事件信息栏，同时也会显示复制的事件号。

移动
^^^^
可以将 ``复制事件号`` 对应的事件移动到地图上选中格子的位置。

覆盖
^^^^
将选中的格子上的事件信息更改为左侧事件信息栏的内容。